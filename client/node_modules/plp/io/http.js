'use strict';

const HttpRequest = require('./http-request.class');

const _ = {

};

const state = {

};

function http (...args) {
  return new HttpRequest(...args);
}

Object.assign(http, {

  get (url, opts = {}) {
    var req = new HttpRequest(url, opts);
    return req
      .get(opts)
      .then(res => {
        return res.data;
      });
  },

  json (url, opts = {}) {
    var req = new HttpRequest(url, opts);
    return req
      .get(opts)
      .then(res => {
        return res.data;
      });
  },

  list (url) {
    var self = this;
    return self
      .get(url)
      .then(data => {
        var urls = [];
        data.replace(/\<a\shref\=\"([\s\S]+?)\"/mgi, (txt, url) => {
          if (url === '../') return;
          urls.push(url);
        });
        return urls;
      });
  },

});

module.exports = http;
