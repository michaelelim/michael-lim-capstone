import req from './req';

const _ = req.hash({
  extend: require('./extend'),
  trim: require('./trim'),
  getElementStyle: require('./get-element-style'),
  elementStorage: require('./element-storage'),
});

function setWindowStyles(elem, mx, my, position = 'absolute') {
  var st = _.getElementStyle(elem),
    ww = window.innerWidth,
    wh = window.innerHeight,
    w, h,
    left, top;
  st.ghostOn();
  w = _.elementStorage.value(elem, 'width', st.width);
  h = _.elementStorage.value(elem, 'height', st.height);
  left = (mx + w > ww) ? ww - w - 20 : mx;
  top = (my + h + 50 > wh) ? wh - h - 50 - 20 : my;
  st.set({
    position: position,
    left: left,
    top: top,
  });
  st.ghostOff();
  return elem;
}

export default setWindowStyles;
