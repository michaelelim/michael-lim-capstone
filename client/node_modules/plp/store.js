'use strict';

const _ = {
  extend: require('./extend'),
  clone: require('./clone'),
  global: require('./global'),
};

const state = {
  index: {},
};

function store(...args) {
  if (args.length === 2) return setStoreValue(...args);
  if (args.length === 1) return getStoreValue(...args);
  return _.clone(state.index);
}

_.extend(store, {
  set: setStoreValue,
  get: getStoreValue,
  inject: injectGlobalMethods,
});

function setStoreValue(name, value) {
  state.index[name] = value;
}

function getStoreValue(name) {
  return state.index[name];
}

function injectGlobalMethods() {
  _.extend(_.global(), {
    PLP_STORE_SET: setStoreValue,
    PLP_STORE_GET: getStoreValue,
  });
}

module.exports = store;
