'use strict';

const state = {
  data: {},
  dataResolves: {},
};

function storeData (name, data) {
  if (state.dataResolves[name]) {
    return state.dataResolves[name](data);
  }
  state.data[name] = data;
}

function readData (name) {
  return new Promise((resolve, reject) => {
    if (state.data[name]) {
      resolve(state.data[name]);
      state.data[name] = null;
      return;
    }
    state.dataResolves[name] = resolve;
  });
}

storeData.read = readData;

module.exports = storeData;
