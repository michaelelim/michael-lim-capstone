'use strict';

const _ = {
  type: require('./type'),
  defaults: require('./defaults'),
  deco: require('./deco'),
};

const state = {

};

function defaultsDecorator(item, name, desc, data = {}) {
  var fn = desc.value;
  desc.value = function (...args) {
    var self = this,
      o = _.type(args[args.length - 1]) === 'object' ? args.pop() : {};    
    args.push(_.defaults(o, data));
    return fn.call(self, ...args);
  };
}

module.exports = _.deco.method(defaultsDecorator);
