function delegate(elem, selector, eventName, handler) {
  elem.addEventListener(eventName, ev => {
    var elem = ev.target;
    if (elem.matches(selector)) {
      return handler(ev, elem);
    }
    while (elem && elem.parentNode && elem.parentNode.tagName !== 'HTML') {
      elem = elem.parentNode;
      if (elem.matches(selector)) {
        return handler(ev, elem);
      }
    }
  }, false);
  return elem;
}

export default delegate;
