'use strict';

const _ = {
  extend: require('./extend'),
  each: require('./each'),
  camelcase: require('./camelcase'),
  flatten: require('./flatten'),
};
const fs = require('fs');
const path = require('path');

function rextend(data = {}, ...n) {
  var names = _.flatten(n);
  if (n.length === 1 && typeof n[0] === 'object' && !Array.isArray(n[0])) {
    names = n[0];
  }
  _.each(names, (mod, name) => {
    if (typeof name === 'number') {
      name = _.camelcase(mod);
    }
    if (fs.existsSync(path.resolve(__dirname, mod) + '.js')) {
      mod = `./${mod}`;
    }
    if (mod.startsWith('!')) {
      mod = mod.slice(1);
    }
    data[name] = require(mod);
  });
  return data;
}

module.exports = rextend;
