'use strict';

const _ = require('lodash');
const Transform = require('./transform');
const util = require('../util');

module.exports = class Util extends Transform {

  flatten (obj) {
    var self = this,
      item = obj && typeof obj === 'object' ? obj
        : obj && typeof obj === 'string' ? self.get(obj)
          : self,
      data = {},
      flat = util.flatten(item);
    _.each(flat, (val, name) => {
      if (name.includes('__parentFilename') || name.includes('__filename')) {
        return;
      }
      data[name] = val;
    });
    return data;
  }

}
