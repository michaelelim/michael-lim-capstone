'use strict';

const clearCode = require('./clear-code');

function shortenByWords (html, count = 7) {
  var val = clearCode(html),
    words = val
      .split(' ')
      .map(s => (s || '').trim())
      .filter(s => !!s),
    cleanWords = words
      .filter(s => !['.', '!', ',', '(', ')'].includes(s));
  if (cleanWords.length <= count) {
    return val;
  }
  return `${words.slice(0, count).join(' ')}...`;
}

module.exports = shortenByWords;
