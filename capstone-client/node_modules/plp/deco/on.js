'use strict';

const _ = {

};

const state = {

};

function onDeco(proto, methodName, desc, name, sel) {
  var Class = proto.constructor,
    oldReady = proto.ready;
  proto.ready = function (...args) {
    var self = this,
      elem = sel ? self.querySelector(sel) : self;
    self.addEventListener(name, ev => {
      var target = ev.target,
        matches = false,
        e = target;
      while (e && e.tagName !== 'HTML') {
        e === elem ? matches = true : '';
        e = e.parentElement;
      }
      if (!matches) return;
      return self[methodName](ev);
    }, false);
    return oldReady ? oldReady.call(self, ...args) : '';
  };
}

module.exports = onDeco;
