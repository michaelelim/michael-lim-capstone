'use strict';

const _ = {
  deco: require('./deco'),
  getFunctionArgs: require('./get-function-args'),
  get: require('./get'),
};

const state = {

};

function expandArgumentsDecorator(item, name, desc) {
  var fn = desc.value,
    argNames = _.getFunctionArgs(fn);
  desc.value = function (data) {
    var self = this,
      args = argNames.map(argName => _.get(data, argName));
    return fn.call(self, ...args);
  };
}

module.exports = _.deco.method(expandArgumentsDecorator);
