'use strict';

const _ = {
  EventEmitter: require('../event-emitter'),
};

class WorkerInstance extends _.EventEmitter {

  constructor (scope) { super();
    var self = this;
    self.scope = scope;
    self.setEvents();
  }

  // Public ==================================================================

  send (...args) {
    var self = this;
    self.scope.postMessage(...args);
  }

  call () {
    var self = this;
  }

  close () {
    var self = this;
  }

  // Private =================================================================

  setEvents () {
    var self = this,
      scope = self.scope;
    scope.addEventListener('message', ev => {
      self.emit('message', ev.data);
    }, false);
    scope.addEventListener('error', ev => {
      self.emit('error', ev);
    }, false);
  }

}

module.exports = WorkerInstance;
