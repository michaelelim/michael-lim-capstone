'use strict';

const _ = {
  query: require('./query'),
};

function parseSelector(sel) {
  var re = /^([a-zA-Z0-9\-]+)?(\.?[a-zA-Z0-9\-\.]+)?(\([^\)]+\))?(\$[\s\S]+?)?$/mgi,
    res = re.exec(sel);
  if (!res) return;
  return {
    tagName: res[1] || 'div',
    className: (res[2] || '').split('.').filter(cl => !!cl).join(' ').trim(),
    attrs: _.query((res[3] || '').slice(1, -1), ','),
    content: (res[4] || '').split('$').pop() || '',
  };
}

module.exports = parseSelector;
