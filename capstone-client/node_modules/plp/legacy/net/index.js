import Socket from './socket';

class Net {

  socket (url, options) {
    var self = this;
    return new Socket(url, options);
  }

  get (url) {
    var self = this,
      xhr = new XMLHttpRequest();
    return new Promise((res, rej) => {
      xhr.addEventListener('load', (ev) => {
        res(xhr.responseText);
      });
      xhr.addEventListener('error', (ev) => {
        rej();
      });
      xhr.open('GET', url);
      xhr.send();
    });
  }

  getJSON (url) {
    var self = this;
    return new Promise((res, rej) => {
      self.get(url)
        .then((content) => {
          res(JSON.parse(content));
        })
        .catch(rej);
    });
  }

}

export default new Net();
