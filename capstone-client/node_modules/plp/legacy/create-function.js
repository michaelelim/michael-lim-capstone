function createFunction(source, ctx, args) {
  var context = ctx || {},
    names = Object.keys(context),
    values = Object.values(context),
    argsStr = names.concat(args || []).join(','),
    fn = new Function(argsStr, source);

  return function () {
    return fn.apply(context.self || null, values.concat([].slice.call(arguments, 0)));
  };
}

export default createFunction;
