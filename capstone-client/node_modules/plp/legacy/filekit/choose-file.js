import File from './file';

var counter = 0;

function chooseFile (multiple) {
  var elem = document.createElement('input'),
    uid = `filekit-input-${++counter}`;
  elem.type = 'file';
  elem.multiple = !!multiple;
  elem.style.display = 'none';
  elem.id = uid;
  document.body.appendChild(elem);
  return new Promise((resolve, reject) => {
    elem.onchange = (ev) => {
      var files = Array.from(elem.files).map(item => {
        return new File(item);
      });
      elem.remove();
      resolve(multiple ? files : files[0]);
    };
    elem.click();
  });
}

export default chooseFile;
