import config from 'options/urls';

const urls = {
  asset: joinPaths.bind(null, config.assets[0]),
  assets: joinPaths.bind(null, config.assets[0]),
  dist: joinPaths.bind(null, config.dist[0]),
  bower: joinPaths.bind(null, config.bower[0]),
  socket: function () { return config.socket[0]; },
  sse: function () { return config.socket[0]; },
};

function joinPaths(p1, p) {
  var p2 = p || '';
  if (isCompleted(p2)) {
    return format(p2);
  }
  if (p1.endsWith('/') && p2.startsWith('/')) {
    p2 = p2.slice(1);
  }
  p = p1 + (p2 || '')
  return trim(p);
}

function trim(url) {
  return url.replace('assets/assets', 'assets');
}

function isCompleted (url) {
  return url.startsWith('http:') || url.includes('base64') || false;
}

function format (url) {
  return (url || '').trim();
}

module.exports = urls;
