'use strict';

const _ = require('lodash');
const sanitize = require('sanitize-html');
const striptags = require('striptags');
const moment = require('moment');

moment.locale('ru');

_.extend(Number, {

  getNumEnding (iNumber, aEndings) {
    var sEnding, i;
    iNumber = iNumber % 100;
    if (iNumber >= 11 && iNumber <= 19) {
      sEnding = aEndings[2];
    } else {
      i = iNumber % 10;
      switch (i) {
        case (1):
          sEnding = aEndings[0];
          break;
        case (2):
        case (3):
        case (4):
          sEnding = aEndings[1];
          break;
        default:
          sEnding = aEndings[2];
      }
    }
    return sEnding;
  },

});

_.extend(Number.prototype, {

  spacing () {
    var str = this + '';
    str = str.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, '$1 ')
    return str;
  },

  rub () {
    return Number.getNumEnding(this, ['рубль', 'рубля', 'рублей']);
  },

  zero () {
    var self = this
    return self.fillZero(2);
  },

  fillZero (...args) {
    var self = this;
    return (self + '').fillZero(...args);
  },

});
