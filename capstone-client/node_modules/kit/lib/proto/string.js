'use strict';

const _ = require('lodash');
const sanitize = require('sanitize-html');
const striptags = require('striptags');
const moment = require('moment');

moment.locale('ru');

_.extend(String.prototype, {

  html () {
    var content = this;
    content = content.replace(/&(nbsp|amp|quot|lt|gt);/g,
      function (match, entity) {
        return {
          "nbsp": " ",
          "amp": "&",
          "quot": "\"",
          "lt": "<",
          "gt": ">"
        }[entity];
      });
    content = sanitize(content)
      .replace(/\>\s+\</mg, '><')
      .replace(/\<p\>\<\/p\>/mg, '');
    return content
  },

  text () {
    var self = this;
    return striptags(self.html());
  },

  fillZero (count) {
    var self = this,
      str = self + '';
    while (str.length < count) {
      str = '0' + str;
    }
    return str;
  },

});
