import _ from '../../common';

Object.assign(Element.prototype, {

  parseClassList (...args) {
    var self = this,
      classes = _.flatten(args)
        .filter(item => item && typeof item === 'string')
        .map(item => item.split(/[\.\s]/));
    return _.flatten(classes)
      .filter(item => item && typeof item === 'string');
  },

  addClass (...args) {
    var self = this,
      parent = self.parentNode;
    self
      .parseClassList(args)
      .forEach(item => {
        if (!parent || !item.startsWith('__') || !parent.classList.length) {
          return self.classList.add(item);
        }
        self.classList.add(`${parent.classList[0]}__${item}`);
      });
    return self;
  },

  removeClass (...args) {
    var self = this;
    self
      .parseClassList(args)
      .forEach(val => self.classList.remove(val));
    return self;
  },

  toggleClass (...args) {
    var self = this;
    self
      .parseClassList(args)
      .forEach(val => self.classList.toggle(val));
    return self;
  },

  hasClass (val) {
    var self = this;
    return self.classList.contains(val);
  },

  cls (...args) {
    var self = this;
    return self.addClass(...args);
  },

});
